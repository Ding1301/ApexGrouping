import{ag as ee,c as f,o as p,P as r,H as d,T as te,G as R,K as se,u as oe,r as i,f as S,S as ne,a as t,C as le,L,D as F,M as P,X as re,k as ae,J as $,O as V,a6 as I,at as ie}from"./@vue-CVEDb2Hp.js";import{u as ue,a as O,c as ce,b as pe}from"./vue-router-CjgXER_4.js";import{E as z,a as de,b as me,c as ge,d as ve,e as _e,f as fe,g as he,h as ye,i as be}from"./element-plus-CgpM7Wtg.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-DsUHJzd8.js";import"./@element-plus-DeAtZ8DB.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BC8lxUvW.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-hUPcw3xl.js";(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))y(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&y(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function y(e){if(e.ep)return;e.ep=!0;const l=o(e);fetch(e.href,l)}})();const xe={id:"app"},Ee={__name:"App",setup(M){const v=ue();return(o,y)=>{const e=ee("router-view");return p(),f("div",xe,[r(e,null,{default:d(({Component:l})=>[r(te,{name:"page-transition",mode:"out-in"},{default:d(()=>[(p(),R(se(l),{key:oe(v).fullPath}))]),_:2},1024)]),_:1})])}}},Be="/ApexGrouping/assets/topMp4-Bvogt_5d.mp4",H="/ApexGrouping/assets/%E7%94%BB%E5%BB%8A-CI3dpmr5.jpg",U="/ApexGrouping/assets/%E6%A0%96%E6%81%AF%E5%9C%B0-Bw5njRGr.jpg",K="/ApexGrouping/assets/%E6%B4%BE%E5%AF%B9%E7%A0%B4%E5%9D%8F%E8%80%85-DC9uXyjM.jpg",X="/ApexGrouping/assets/%E6%BA%A2%E5%87%BA-DhsU-koy.jpg",q="/ApexGrouping/assets/%E7%9B%B8%E4%BD%8D%E5%A5%94%E8%B7%91%E8%80%85-D4X87R-V.jpg",J="/ApexGrouping/assets/icon-pt50-BxjgfpMN.png",we="/ApexGrouping/assets/preview-CcCErcww.jpg",W=(M,v)=>{const o=M.__vccOpts||M;for(const[y,e]of v)o[y]=e;return o},Ae={class:"video-container"},Ce=["src","muted"],Me={class:"play-box"},Ge={class:"sound-box"},Le={class:"btn-box"},je={__name:"homeView",setup(M){const v=O(),o=i(null),y=i(Be),e=i(!0),l=i(!1),c=i("center"),B=i(!1),x=i(!1),j=i(!1),k=[H,U,K,X,q,J,we],D=()=>{const m=k.map(a=>new Promise((n,w)=>{const u=new Image;u.onload=()=>n(a),u.onerror=A=>w(A),u.src=a}));Promise.allSettled(m).then(a=>{a.filter(n=>n.status==="fulfilled").length,j.value=!0}).catch(a=>{console.error("图片预加载失败:",a),j.value=!0})},T=()=>{e.value=!e.value,o.value.muted=e.value};S(()=>{D(),o.value&&(o.value.play().catch(m=>{console.error("视频播放失败:",m)}),o.value.addEventListener("playing",()=>{l.value=!0}),o.value.addEventListener("pause",()=>{l.value=!1}))}),ne(()=>{o.value&&(o.value.removeEventListener("playing",()=>{}),o.value.removeEventListener("pause",()=>{}))});const _=()=>{x.value=!0,B.value=!0},s=()=>{x.value&&v.push("/grouping")};return(m,a)=>{const n=z;return p(),f("div",{class:F(["home-page-box",{moving:B.value}]),onTransitionend:s},[t("div",Ae,[t("video",{ref_key:"videoRef",ref:o,src:y.value,autoplay:"",loop:"",muted:e.value,class:"video-element",style:le({objectPosition:c.value})},null,12,Ce)]),t("div",Me,[t("div",Ge,[r(n,{class:"sound-btn",onClick:T},{default:d(()=>[L(P(e.value?"🔇":"🔊"),1)]),_:1})]),a[1]||(a[1]=t("div",{class:"title-box"},[t("h1",null,[L(" 歪比巴卜_(:3」∠)_专属"),t("br"),t("span",{class:"subtitle"},"Apex Legends"),L("随机分组系统"),t("br"),t("span",{class:"tagline"},"快速匹配·智能分组·开启竞技新纪元")])],-1)),t("div",Le,[r(n,{size:"large",type:"success",round:"",class:"start-btn",onClick:_},{default:d(()=>a[0]||(a[0]=[L("开始随机分组")])),_:1,__:[0]})])])],34)}}},Ve=W(je,[["__scopeId","data-v-96f099b4"]]),Ie={class:"grouping-content"},Pe={class:"groupingBox"},ke={class:"grouping-img"},De={class:"groupingBox"},Te={class:"staffBox"},Ne={class:"formBox"},Re={key:0,class:"result-container"},$e={style:{display:"flex","flex-direction":"column","align-items":"center","font-size":"25px","font-weight":"700"}},Se={key:0},Fe={style:{"margin-bottom":"20px"}},Oe={class:"groupImg"},ze={__name:"groupingView",setup(M){O();const v=i(!1),o=i([{id:0,url:H},{id:1,url:U},{id:2,url:K},{id:3,url:X},{id:4,url:q}]),y=i(J),e=i([]),l=i(0),c=re({session:"",nameList:[]});i([]);const B=i([]),x=i([]);S(()=>{setTimeout(()=>{v.value=!0},10)});const j=_=>{},k=()=>{e.value.length===o.value.length&&(e.value=[]);let _;do _=Math.floor(Math.random()*o.value.length);while(e.value.includes(_));e.value.push(_),l.value=_};ae(()=>o.value[l.value]);const D=()=>{const _=c.nameList.split(/[;；]/).map(n=>n.trim()).filter(n=>n),s=parseInt(c.session)||1,m=new Set,a=[];for(let n=0;n<s;n++){let w=!1,u,A,G,E;for(;!w;){u=[..._];for(let g=u.length-1;g>0;g--){const h=Math.floor(Math.random()*(g+1));[u[g],u[h]]=[u[h],u[g]]}A=u.slice(0,6),G=u.slice(6),E=[];const N=A.length,b=Math.ceil(N/3);for(let g=0;g<b;g++){const h=g*3,Q=A.slice(h,h+3).map((Y,Z)=>`第${h+Z+1}位: ${Y}`);E.push(Q)}const C=T(E);m.has(C)||(m.add(C),w=!0)}a.push({sessionNumber:n+1,groups:E,unusedMembers:G}),n===s-1&&(B.value=G)}x.value=a.flatMap(n=>n.groups);for(let n=1;n<=c.session;n++)k()};function T(_){return _.map(m=>m.slice().sort().join("|")).sort().join("-")}return(_,s)=>{const m=ve,a=ge,n=de,w=fe,u=_e,A=me,G=z,E=he,N=ye;return p(),f("div",{class:F(["grouping-box",{amplify:v.value}]),onAnimationend:j},[t("div",Ie,[t("div",Pe,[s[2]||(s[2]=t("div",{class:"groupingTitle"}," 竞技场地图展示 ",-1)),t("div",ke,[r(n,{interval:4e3,type:"card",autoplay:"","indicator-position":"none",arrow:"never","pause-on-hover":!1},{default:d(()=>[(p(!0),f(V,null,I(o.value,b=>(p(),R(a,{key:b},{default:d(()=>[r(m,{src:b.url,fit:"cover",style:{width:"100%",height:"100%"},lazy:""},null,8,["src"])]),_:2},1024))),128))]),_:1})])]),t("div",De,[s[4]||(s[4]=t("div",{class:"groupingTitle"}," 随机分组-随机地图 ",-1)),t("div",Te,[t("div",Ne,[r(A,{inline:!0,model:c,class:"demo-form-inline"},{default:d(()=>[r(u,{label:"战斗场数：","label-width":"120px",placeholder:"session"},{default:d(()=>[r(w,{modelValue:c.session,"onUpdate:modelValue":s[0]||(s[0]=b=>c.session=b),clearable:"",placeholder:"请输入战斗场数："},null,8,["modelValue"])]),_:1}),r(u,{label:"战斗人员名单","label-width":"120px",placeholder:"nameList"},{default:d(()=>[r(w,{modelValue:c.nameList,"onUpdate:modelValue":s[1]||(s[1]=b=>c.nameList=b),style:{width:"192px"},autosize:"",type:"textarea",placeholder:"请输入名单,以;分隔"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t("span",null,[r(G,{type:"success",round:"",size:"large",onClick:D},{default:d(()=>s[3]||(s[3]=[L("开始匹配")])),_:1,__:[3]})])])])]),x.value.length?(p(),f("div",Re,[s[8]||(s[8]=t("h3",{class:"groupingTitle"},"分组结果",-1)),(p(!0),f(V,null,I(Math.ceil(x.value.length/2),(b,C)=>(p(),R(N,{class:"groupingRow",key:C},{default:d(()=>[r(E,{span:8,class:"groupingCol"},{default:d(()=>[s[5]||(s[5]=t("span",{class:"groupAsty"}," A小组 ",-1)),(p(!0),f(V,null,I(x.value[C*2],(g,h)=>(p(),f("div",{class:"groupingColDiv",key:h},P(g),1))),128))]),_:2,__:[5]},1024),r(E,{span:8,class:"groupingCol"},{default:d(()=>[t("div",$e,[B.value&&B.value.length>0?(p(),f("div",Se,[t("p",Fe," 观战人员: "+P(B.value.join("、")),1)])):$("",!0),r(m,{src:y.value,style:{width:"200px",height:"200px"}},null,8,["src"])])]),_:1}),r(E,{span:8,class:"groupingCol"},{default:d(()=>[s[6]||(s[6]=t("span",{class:"groupBsty"}," B小组 ",-1)),(p(!0),f(V,null,I(x.value[C*2+1]||[],(g,h)=>(p(),f("div",{class:"groupingColDiv",key:h},P(g),1))),128))]),_:2,__:[6]},1024),t("div",Oe,[s[7]||(s[7]=t("h3",null,"比赛地图",-1)),r(m,{style:{width:"100%",height:"100%"},src:o.value[(C+1)%o.value.length].url,fit:"cover"},null,8,["src"])])]),_:2},1024))),128))])):$("",!0)])],34)}}},He=W(ze,[["__scopeId","data-v-fc7fe450"]]),Ue=[{path:"/",name:"Home",component:Ve},{path:"/grouping",name:"Grouping",component:He}],Ke=ce({history:pe("/ApexGrouping/"),routes:Ue});ie(Ee).use(Ke).use(be).mount("#app");
